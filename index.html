<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <div class="bg-vis">
      <iframe></iframe>
    </div>
    <div class="overlay">
      <div class="container">
        <div class="shade">
          <span class="first-name">Victor</span>
          <span class="last-name">Powell</span>
            <div id="github">
              <div class="github-logo">
                <img class="logo-black" src="img/github_512_black.png" />
                <img class="logo-white" src="img/github_512_white.png" />
              </div>
              <div class="github-name">vicapow</div>
            </div>
          </div>
        <div class="conf-id"><img src="img/unconf.png" /></div>
        <div class="date">MARCH 29, 2014</div>
      </div>
    </div>
    <script src="d3.js" charset="utf-8"></script>
    <script>
var w = 1050, h = 1500
var svg = d3.select('svg').attr({width: w, height: h })
var iframe = d3.select('iframe')
var overlay = d3.select('.overlay').style({width: w + 'px', height: h + 'px' })
window.is_ready = false

function loaded() {
  console.log('loaded')
  iframe.style({width: w + 'px', height: h + 'px' })
    .attr('src', decodeURIComponent(window.location.hash.split('#')[1]) || 'badges/b1/index.html')
  window.step = function(){ iframe.node().contentWindow.step() }
  if(iframe.node().contentWindow.is_ready) window.is_ready = true
  else iframe.node().contentWindow.ready = function(){
    window.is_ready = true
  }
}

// setTimeout(function(){
//   window.is_ready = true
// }, 1000)

function checkLoaded(){
  if(iframe.node().contentWindow.document.readyState === 'complete') loaded()
  else setTimeout(checkLoaded, 10)
}
checkLoaded()
    </script>
  </body>
</html>
