<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <div class="bg-vis">
      <iframe></iframe>
    </div>
    <div class="overlay">
      <div class="container">
        <div class="shade">
          <span class="first-name">Victor</span>
          <span class="last-name">Powell</span>
            <div id="github">
              <div class="github-logo">
                <img class="logo" src="img/github-logo.png" />
              </div>
              <div class="github-name">vicapow</div>
            </div>
          </div>
        <div class="conf-id"><img src="img/unconf.png" /></div>
        <div class="date">MARCH 29, 2014</div>
      </div>
    </div>
    <script src="d3.js" charset="utf-8"></script>
    <script>
var w = 1050, h = 1500
var svg = d3.select('svg').attr({width: w, height: h })
var iframe = d3.select('iframe')
var overlay = d3.select('.overlay').style({width: w + 'px', height: h + 'px' })
window.is_ready = false

iframe.style({width: w + 'px', height: h + 'px' })
var el =  iframe.node()
window.step = function(){ el.contentWindow.step() }


var opts = decodeURIComponent(window.location.hash.split('#')[1] || '')

try{
  opts = JSON.parse(opts)
}catch(e){
  opts = {
      url: opts
    , firstName: 'Victor'
    , lastName: 'Powell'
    , githubName: 'vicapow'
  }
}

opts.url = opts.url || 'badges/b1/index.html'

d3.select('.github-name').text(opts.githubName)
d3.select('.first-name').text(opts.firstName)
d3.select('.last-name').text(opts.lastName)

iframe.attr('src', opts.url)
  .on('load', function(){
    ;(function check(){
      setTimeout(function(){
        if(el.contentWindow.is_ready) window.is_ready = true
        else check()
      }, 100)
    })()
  })

    </script>
  </body>
</html>
